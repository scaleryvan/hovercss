

# 前端开发流程指引


## 1. 前端代码目录结构
目录结构

## 2. 构建环境的安装搭建

### 2.1 node.js安装
前端工程环境基于[node.js],如还未安装，请自行下载安装,启用命令行，输入`node -v`检测是否已经安装

### 2.2 cnpm安装
**npm** 为嵌套依赖，文件目录过于深，难以删除且下载速度慢，所以改用 **cnpm**

    npm install -g cnpm --registry=https://registry.npm.taobao.org

命令行中输入如上命令，安装**cnpm**并将仓库地址切换至淘宝的库，便于下载

### 2.3 安装依赖包
启用命令行，进入**fe-resource**目录,运行如下命令，

    cnpm install -g gulp
    cnpm install

当命令行再次显示**fe-resource**目录则安装成功

## 3. 运行

    gulp build

打包构建,此命令仅在发布时使用，**服务端同事需要联调时，在无需修改js的情况下，每次获取到前端更新的代码，运行此命令一次即可**

    gulp

开发命令，此命令会启用文件监听，并启用一个 *localhost:3000* 默认代理的是 *localhost:2016* 如若默认的.net起的服务端口不是2016，则无法使用热更新

在**3000**端口下，JS文件的修改，和SCSS文件的修改，都会触发热更新，所以无需手动刷新页面，使调试更有效率

## 4. 版本管理
项目使用**git**管理，如对**git**熟悉可跳过此章

默认的**dev**分支是我们的开发代码，但不建议在此分支上直接修改代码，
建议在每开发一个新功能或者修改一个功能和解决bug时，都相应的新建一个分支，
保证代码的条理性，方便自己多线操作代码，不会造成代码管理的紊乱。

### 4.1 bug分支示例

#### 4.1.1 创建分支
* `git checkout -b bug1` 创建并切换至**bug1**分支

#### 4.1.2 同步最新代码至当前开发分支
**可图形化操作的，请忽略命令**
* commit 当前分支的修改
* `git checkout dev` 切换至**dev**分支
* `git pull` 拉取最新的代码
* `git checkout bug1` 切换至**bug1**分支
* `git merge dev` 合并**dev**分支至当前分支
如上操作，就将最新代码同步至自己的当前开发分支了，此处以**bug1**分支为例

#### 4.1.3 完成功能开发后回归**dev**分支
**可图形化操作的，请忽略命令**
* commit 当前开发分支的修改
* `git checkout dev` 切换至**dev**分支
* `git merge bug1` 合并**bug1**分支至当前**dev**分支
至此，就以示例的**bug1**分支开发完成并合并至**dev**分支，然后同步至远程库即可


[node.js]: https://nodejs.org/zh-cn/